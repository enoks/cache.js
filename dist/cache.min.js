/**
 * cache v1.1.0
 * https://github.com/enoks/cache.js
 *
 * Copyright 2018, Stefan KÃ¤sche
 * https://github.com/enoks
 *
 * Licensed under MIT
 * https://github.com/enoks/peekaboo.js/blob/master/LICENSE
 */
!function(e,t){"use strict";"function"==typeof define&&define.amd?define("cache",[],function(){return t}):"object"==typeof module&&"object"==typeof module.exports?module.exports=t:window.cache=t}(0,function(undefined){"use strict";function _parseDateTo(date,to){if(date=date.replace(/(\d+)/g," $1").replace(/\s+/g," ").trim(),/^-?\d+[yMwdhms]( -?\d+[yMwdhms])*$/.test(date)){var years=date.match(/\d+y/g),months=date.match(/\d+M/g);date=date.replace("w","*1000*60*60*24*7").replace("d","*1000*60*60*24").replace("h","*1000*60*60").replace(/(\d+y|\d+M|ms|)/g,"").replace("m","*1000*60").replace("s","*1000"),date=new Date(Date.now()+(eval(date.replace(/\s+/,"+"))||0)),(years||[]).forEach(function(e){date.setFullYear(date.getFullYear()+parseInt(e))}),(months||[]).forEach(function(e){date.setMonth(date.getMonth()+parseInt(e))})}else date=new Date(date);if(isNaN(date.getTime()))return console.warn('"'+arguments[0]+'" is an invalid date :/ Please see https://github.com/enoks/cache.js#setter for more information.'),null;switch((to||"utc").toLowerCase()){case"time":case"timestamp":return date.getTime();default:case"utc":return date.toUTCString()}}var storages={},cache=function(){switch(arguments[0]=arguments[0]||"localStorage"){case"addStorage":return arguments[1]?storages[arguments[1]]?console.error('Storage "'+arguments[1]+'" already exists.'):(storages[arguments[1]]=arguments[2]||{},cache(arguments[1])):console.error("No storage name!? This can not work.");case"removeStorage":return delete storages[arguments[1]];default:storages[arguments[0]]||console.error('No "'+arguments[0]+'" storage/cache available. Please choose "'+Object.keys(storages).join('", "')+'".');var e=storages[arguments[0]]||{};return"[object Object]"!=Object.prototype.toString.call(e)&&(e={}),e.set||(e.set=function(){return this}),e.get||(e.get=function(e,t){return void 0===t?null:t}),e.remove||(e.remove=function(){return this}),e}};return cache("addStorage","localStorage",{set:function(e,t,r){return this.remove(e),void 0===r||""==r.trim()?sessionStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,JSON.stringify({data:t,expires:_parseDateTo(r)})),this},get:function(e,t){var r,a=sessionStorage.getItem(e);if(null!==a)try{r=JSON.parse(a),a=r}catch(e){}else{a=localStorage.getItem(e);try{r=JSON.parse(a),r.expires&&Date.now()>Date.parse(r.expires)?(this.remove(e),a=null):a=r.data||null}catch(e){}}return null!=a?a:void 0!==t?t:null},remove:function(e){return sessionStorage.removeItem(e),localStorage.removeItem(e),this}}),cache("addStorage","cookie",{set:function(e,t,r){"string"!=typeof(t=t||"")&&(t=JSON.stringify(t));var a=[e+"="+t,"path=/"];return void 0!==r&&""!=r.trim()&&(r=_parseDateTo(r))&&a.push("expires="+r),document.cookie=a.join(";"),this},get:function(e,t){var r;if(decodeURIComponent(document.cookie).split(";").forEach(function(t){void 0===r&&0==t.trim().indexOf(e+"=")&&(r=t.replace(new RegExp("^\\s*"+e+"="),""))}),void 0===r)r=void 0!==t?t:null;else try{JSON.parse(r),r=JSON.parse(r)}catch(e){}return r},remove:function(e){return this.set(e,null,"-1s"),this}}),cache}());